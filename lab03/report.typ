#import "../templates/lib.typ": project, code_box
 
#let std_name = sys.inputs.at("name", default: "looomenn")
#let std_group = sys.inputs.at("group", default: "XX-00")
#let teacher = sys.inputs.at("teacher", default: "Mykola Parasuk")

#show: project.with(
  work_type: "Комп'ютерний практикум",
  number: "3",
  discipline: "Комплексні системи захисту інформації",
  topic: "Обґрунтування показника якості КСЗІ",
  student_name: std_group+"\n"+std_name,
  teacher_name: teacher,
  year: 2025,
  extra_info: ("Варіант":"1")
)


#outline()
#pagebreak()

= Мета
Навчитись оцінювати максимальний попереджений збиток при
впровадженні визначених засобів захисту.

= Хід роботи

Повний код доступний на github @code

== Формування вектору $alpha$
Задаємо 10 частот появи загроз, нормуємо їх до суми 1, отримуємо αᵢ.

\
Фрагмент коду:
#code_box(title: "src/main.py", info: "python")[
```python
def normalize(vec: List[float]) -> List[float]:
    s = sum(vec)
    if s == 0:
        return [0.0 for _ in vec]
    return [x / s for x in vec]

raw_alpha = [random.randint(1, 100) for _ in range(N_THREATS)]
alpha = normalize(raw_alpha)
```
]

\
Результат виконання:
#code_box(title: "plaintext")[
```text
raw_alpha=[82, 15, 4, 95, 36, 32, 29, 18, 95, 14]
alpha=[0.19523809523809524, 0.03571428571428571, 0.009523809523809525, 0.2261904761904762, 0.08571428571428572, 0.0761904761904762, 0.06904761904761905, 0.04285714285714286, 0.2261904761904762, 0.03333333333333333]
```
]

#pagebreak()
== Формування вектора $Delta q$
Аналогічно з $alpha$

\
Фрагмент коду:
#code_box(title: "src/main.py", info: "python")[
```python
raw_dq = [random.random() for _ in range(N_THREATS)]
delta_q = normalize(raw_dq)
```
]

\
Результат виконання:
#code_box(title: "plaintext")[
```text
raw_dq=[0.6766994874229113, 0.8921795677048454, 0.08693883262941615, 0.4219218196852704, 0.029797219438070344, 0.21863797480360336, 0.5053552881033624, 0.026535969683863625, 0.1988376506866485, 0.6498844377795232]

delta_q=[0.1825568233630373, 0.24068803180253445, 0.023453951727021253, 0.11382409554147879, 0.008038554523488022, 0.05898313045673845, 0.13633238650320692, 0.007158749814918196, 0.05364149160591606, 0.17532278466166065]
```
]

== Матриця $B_(\ij)$
Формуємо матрицю $10 times 12$. Нормування робимо так, щоб для кожної загрози i виконувалось: $sum _j  beta_(\ij) = 1$. 

\
Фрагмент коду:
#code_box(title: "src/main.py", info: "python")[
```python
beta = [normalize([random.random() for _ in range(N_REQS)]) for _ in range(N_THREATS)]
```
]

\
Результат виконання:
#code_box(title: "plaintext")[
```text
0.098067    0.039670     0.106044    ...    0.016690
0.012345    0.108177     0.077061    ...    0.109991
0.147763    0.180324     0.011727    ...    0.094741
...         ...          ...         ...    ...
0.040487    0.0769482    0.027461    ...    0.119688
0.091596    9.8771435    0.055984    ...    0.014793
```
]

== Ступінь виконання вимог
Для кількісних вимог обчислюємо нормоване значення у [0;1]

\
Фрагмент коду:
#code_box(title: "src/main.py", info: "python")[
```python
def calc_x(cur: float, worst: float, best: float) -> float:
    if best == worst:
        return 1.0
    
    if best > worst:
        val = (cur - worst) / (best - worst)
    else:
        val = (worst - cur) / (worst - best)
        
    return max(0.0, min(1.0, val))
```
]


== Додаткові вимоги
Розширюємо набір вимог до 12

\
*Вимоги щодо порушення цілісності*
\
1. Backup Storage
  - Найгірше значення: 0 штук (резервних носіїв немає)
  - Найкраще значення: 2 штуки
  - Поточне значення: 1 носій

\
2. Частота дублювання інформації за добу (Duplication/Day)
  - Найгірше значення: 0,5 разу (раз у два дні)
  - Найкраще значення: 5 разів
  - Поточне значення: 3 рази

\
3. Антивірусні програми скількох розробників використовуються для АВЗ (Antivirus Vendors)
  - Найгірше значення: 1 розробник
  - Найкраще значення: 3 розробники
  - Поточне значення: 2 розробники

#pagebreak()
*Вимоги щодо порушень доступності*
4. Доступність сервісу (SLA uptime), % (Uptime SLA %)
  - Найгірше значення: 95.0 %
  - Найкраще значення: 99.9 %
  - Поточне значення: 99.0 %

\
5. Резервування сервісу (кількість реплік) (Replicas Count)
  - Найгірше значення: 1 репліка (без резервування)
  - Найкраще значення: 4 репліки
  - Поточне значення: 2 репліки

\
6. Захист від DDoS / перевантаження (DDoS Protection)\
  $A = mu(x) =$\
  - 1.0 / Повний захист (анти-DDoS + WAF + rate limiting)
  - 0.8 / Високий рівень (WAF + rate limiting + частковий анти-DDoS)
  - 0.5 / Базовий рівень (тільки rate limiting / базові правила)
  - 0.1 / Мінімальний рівень (поодинокі налаштування)
  - 0.0 / Відсутній захист

  Поточний варіант: 0.8 / Високий рівень

\
*Вимоги щодо порушень конфіденційності*\
7. Мінімальна довжина пароля (Password Length)
  - Найгірше значення: 6 символів
  - Найкраще значення: 16 символів
  - Поточне значення: 10 символів

\
8. Рівень шифрування даних (Encryption Level)\
  $A = mu(x) =$\
  - 1.0 / Повне (шифрування БД і сховища, ключі захищені окремо)
  - 0.7 / Частково-повне (шифрування є, але покриття/керування ключами неідеальні)
  - 0.5 / Часткове (шифрується лише частина даних або лише резервні копії)
  - 0.1 / Мінімальне (епізодичні/вибіркові механізми)
  - 0.0 / Відсутнє

  Поточний варіант: 0.7 / Частково-повне.

#pagebreak()
9. Впровадження MFA (MFA Implementation)\
  $A = mu(x) =$\
  - 1.0 / Для всіх критичних ролей
  - 0.8 / Для адміністраторів і частини користувачів
  - 0.5 / Опційно / частково
  - 0.1 / Пілотний режим
  - 0.0 / Немає

Поточний варіант: 0.8 / Для адміністраторів і частини користувачів.

\
*Вимоги щодо порушень спостереженості*

10. Чи може система працювати з вимкненою системою захисту (No Protection Mode)\
  $A = mu(x) =$\
  - 1.0 / Немає (система не працює без захисту)
  - 0.5 / Є, однак основні механізми захисту діють
  - 0.0 / Система продовжує працювати при вимкненні основних механізмів захисту
  Поточний варіант: 0.5 / Є, однак основні механізми захисту діють

\
11. Наскільки новим та ефективним є ПЗ протидії руткітам (Anti-Rootkit)\
  $A = mu(x) =$\
  - 1.0 / Цілком нове.
  - 0.7 / Переважно нове.
  - 0.5 / Нове, але не завжди ефективне.
  - 0.3 / Не дуже нове і частково неефективне.
  - 0.1 / Старе та неефективне.
  - 0.0 / Відповідне ПЗ відсутнє.
  Поточний варіант: 1.0 / Цілком нове.

\
12. Якість сповіщення адміністратора про підозрілі події (Log Alerting)\
  $A = mu(x) =$\  
  - 1.0 / Якісно.
  - 0.7 / Не завжди якісно.
  - 0.5 / В цілому якісно.
  - 0.3 / Не дуже якісно.
  - 0.1 / Неякісно.
  - 0.0 / Механізми сповіщення відсутні.
  Поточний варіант: 0.7 / Не завжди якісно.

#pagebreak()
Фрагмент коду:
#code_box(title: "src/main.py", info: "python")[
```python
reqs_data: list[tuple[str, float, float, float]] = [
    ("Backup Storage", 0, 2, 1),
    ("Duplication/Day", 0.5, 5, 3),
    ("Antivirus Vendors", 1, 3, 2),
    ("Uptime SLA %", 95.0, 99.9, 99.0),
    ("Replicas Count", 1, 4, 2),
    ("Password Length", 6, 16, 10),
    ("No Protection Mode", 0.0, 1.0, 0.5),
    ("Anti-Rootkit", 0.0, 1.0, 1.0),
    ("Log Alerting", 0.0, 1.0, 0.7),
    ("DDoS Protection", 0.0, 1.0, 0.8),
    ("Encryption Level", 0.0, 1.0, 0.7),
    ("MFA Implementation", 0.0, 1.0, 0.8)
]
```
]

\
Результат виконання:
#code_box(title: "plaintext")[
```text
X_j:
Req Name             | Worst  | Best   | Cur    | X_val (Norm)
------------------------------------------------------------
Backup Storage       | 0      | 2      | 1      | 0.5000    
Duplication/Day      | 0.5    | 5      | 3      | 0.5556    
Antivirus Vendors    | 1      | 3      | 2      | 0.5000    
Uptime SLA %         | 95.0   | 99.9   | 99.0   | 0.8163    
Replicas Count       | 1      | 4      | 2      | 0.3333    
Password Length      | 6      | 16     | 10     | 0.4000    
No Protection Mode   | 0.0    | 1.0    | 0.5    | 0.5000    
Anti-Rootkit         | 0.0    | 1.0    | 1.0    | 1.0000    
Log Alerting         | 0.0    | 1.0    | 0.7    | 0.7000    
DDoS Protection      | 0.0    | 1.0    | 0.8    | 0.8000    
Encryption Level     | 0.0    | 1.0    | 0.7    | 0.7000    
MFA Implementation   | 0.0    | 1.0    | 0.8    | 0.8000    
------------------------------------------------------------
```
]

#pagebreak()
== Обчислення $W$ для поточного та найкращого
\
Фрагмент коду:
#code_box(title: "src/main.py", info: "python")[
```python
def calculate_W(
    alpha_vec: list[float], 
    dq_vec: list[float], 
    beta_mat: list[list[float]], 
    x_vec: list[float]
) -> tuple[float, list[float]]:
    W_total = 0.0
    details = []
    
    for i in range(len(alpha_vec)):
        p_us = sum(beta_mat[i][j] * x_vec[j] for j in range(len(x_vec)))

        w_i = alpha_vec[i] * dq_vec[i] * p_us
        W_total += w_i
        details.append(p_us)
        
    return W_total, details
```
]

\
Результат виконання:
#code_box(title: "plaintext")[
```text
W (Поточний показник):   0.065481
W (Потенційний/Best):    0.103088
```
]

#pagebreak()
== Перевірка фінансового обмеження
Для варіанта 1:
- $N=500$
- $M=300$ 
- $Z=1700$

\
Фрагмент коду:
#code_box(title: "src/main.py", info: "python")[
```python
#...
cost_n_unit = 500
cost_m_unit = 300
budget_limit = 1700

cost_cur = (2 * cost_n_unit) + (1 * cost_m_unit)
cost_best = (3 * cost_n_unit) + (2 * cost_m_unit)

status_cur = "OK" if cost_cur <= budget_limit else "Over"
status_best = "OK" if cost_best <= budget_limit else "Over"
#...
```
]

\
Результат виконання:
#code_box(title: "plaintext")[
```text
Budget (Limit Z=1700)
Поточна вартість:  1300 -> OK
Найкраща вартість: 2100 -> Over
```
]

#pagebreak()
= Вивід програми

Приклад детального виводу для `seed=42`
#code_box(title: "plaintext")[
```text
Results:

№   | Alpha (Prob)         | Delta Q (Losses)     | P_us (Protection)   
---------------------------------------------------------------------------
1   | 0.19524              | 0.18256              | 0.63860
2   | 0.03571              | 0.24069              | 0.63503
3   | 0.00952              | 0.02345              | 0.63714
4   | 0.22619              | 0.11382              | 0.63504
5   | 0.08571              | 0.00804              | 0.64621
6   | 0.07619              | 0.05898              | 0.65672
7   | 0.06905              | 0.13633              | 0.61913
8   | 0.04286              | 0.00716              | 0.62711
9   | 0.22619              | 0.05364              | 0.66092
10  | 0.03333              | 0.17532              | 0.57034

X_j:
Req Name             | Worst  | Best   | Cur    | X_val (Norm)
------------------------------------------------------------
Backup Storage       | 0      | 2      | 1      | 0.5000    
Duplication/Day      | 0.5    | 5      | 3      | 0.5556    
Antivirus Vendors    | 1      | 3      | 2      | 0.5000    
Uptime SLA %         | 95.0   | 99.9   | 99.0   | 0.8163    
Replicas Count       | 1      | 4      | 2      | 0.3333    
Password Length      | 6      | 16     | 10     | 0.4000    
No Protection Mode   | 0.0    | 1.0    | 0.5    | 0.5000    
Anti-Rootkit         | 0.0    | 1.0    | 1.0    | 1.0000    
Log Alerting         | 0.0    | 1.0    | 0.7    | 0.7000    
DDoS Protection      | 0.0    | 1.0    | 0.8    | 0.8000    
Encryption Level     | 0.0    | 1.0    | 0.7    | 0.7000    
MFA Implementation   | 0.0    | 1.0    | 0.8    | 0.8000    
------------------------------------------------------------
W (Поточний показник):   0.065481
W (Потенційний/Best):    0.103088

Budget (Limit Z=1700)
Поточна вартість:  1300 -> OK
Найкраща вартість: 2100 -> Over
```
]

#pagebreak()
#bibliography("refs.yaml", style: "ieee")